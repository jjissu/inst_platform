<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>악기점 및 공방 지도</title>
<!--    API 키 받아서 수정 필요-->
<!--    <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=YOUR_NAVER_MAP_API_KEY"></script>-->
    <style>
        #map {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>
<h1>서울 내 악기점 및 공방</h1>
<div id="map"></div>

<script>
    var map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(37.5665, 126.9780), // 서울 시청 좌표
        zoom: 10
    });

    var stores = [[# th:each="store : ${stores}"#]
    {
        name: "[# th:text="${store.name}" #]",
        latitude: [# th:text="${store.latitude}" #],
        longitude: [# th:text="${store.longitude}" #]
    },
    [# end #]
    ];

    stores.forEach(function(store) {
        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(store.latitude, store.longitude),
            map: map,
            title: store.name
        });

        var infowindow = new naver.maps.InfoWindow({
            content: '<div style="width:150px;text-align:center;padding:10px;">' + store.name + '</div>'
        });

        naver.maps.Event.addListener(marker, "click", function(e) {
            if (infowindow.getMap()) {
                infowindow.close();
            } else {
                infowindow.open(map, marker);
            }
        });
    });
</script>
</body>
</html>
